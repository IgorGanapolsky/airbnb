#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ðŸ“¦ Running post-merge dependency checks..."

# Check if package.json was changed
if git diff HEAD@{1} --name-only | grep -q "package.json"; then
  echo "ðŸ“¥ package.json changed. Installing dependencies..."
  yarn install
fi

# Check if Podfile was changed
if git diff HEAD@{1} --name-only | grep -q "ios/Podfile"; then
  echo "ðŸ“± Podfile changed. Installing pods..."
  cd ios && pod install && cd ..
fi

# Check if build.gradle was changed
if git diff HEAD@{1} --name-only | grep -q "android/.*build.gradle"; then
  echo "ðŸ¤– build.gradle changed. Cleaning Android build..."
  cd android && ./gradlew clean && cd ..
fi

echo "âœ… Post-merge checks completed!"